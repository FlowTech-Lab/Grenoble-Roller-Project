<% 
  # Menu items modernes 2025 - Design épuré avec hiérarchie claire
%>

<!-- INITIATIONS (level >= 40 : INITIATION, MODERATOR, ADMIN, SUPERADMIN) -->
<% if can_view_initiations? %>
  <li class="admin-menu-item">
    <%= link_to admin_panel_initiations_path, 
        class: "admin-menu-link #{'active' if admin_panel_active?('initiations')}",
        title: "Initiations",
        aria: { label: "Voir les initiations", current: admin_panel_active?('initiations') ? 'page' : nil },
        data: { bs_dismiss: mobile ? "offcanvas" : nil }.compact do %>
      <i class="bi bi-people admin-menu-icon" aria-hidden="true"></i>
      <span class="admin-menu-label">Initiations</span>
    <% end %>
  </li>
<% end %>

<!-- BOUTIQUE (level >= 60 uniquement) -->
<% if can_access_admin_panel?(60) %>
  <li class="admin-menu-item">
    <a href="#boutique-submenu" 
       class="admin-menu-link <%= 'active' if admin_panel_active?('products') || admin_panel_active?('product_variants') || admin_panel_active?('inventory') %>"
       data-bs-toggle="collapse"
       aria-expanded="<%= admin_panel_active?('products') || admin_panel_active?('product_variants') || admin_panel_active?('inventory') ? 'true' : 'false' %>"
       aria-controls="boutique-submenu"
       title="Boutique">
      <i class="bi bi-shop admin-menu-icon" aria-hidden="true"></i>
      <span class="admin-menu-label">Boutique</span>
      <i class="bi bi-chevron-down admin-menu-chevron ms-auto" aria-hidden="true"></i>
    </a>
    <ul class="collapse <%= 'show' if admin_panel_active?('products') || admin_panel_active?('product_variants') || admin_panel_active?('inventory') %>" id="boutique-submenu">
      <li class="admin-menu-subitem">
        <%= link_to admin_panel_products_path, 
            class: "admin-menu-sublink #{'active' if admin_panel_active?('products')}",
            title: "Produits",
            data: { bs_dismiss: mobile ? "offcanvas" : nil }.compact do %>
          <i class="bi bi-box admin-menu-subicon" aria-hidden="true"></i>
          <span>Produits</span>
        <% end %>
      </li>
      <li class="admin-menu-subitem">
        <%= link_to admin_panel_inventory_path, 
            class: "admin-menu-sublink #{'active' if admin_panel_active?('inventory')}",
            title: "Inventaire",
            data: { bs_dismiss: mobile ? "offcanvas" : nil }.compact do %>
          <i class="bi bi-clipboard-data admin-menu-subicon" aria-hidden="true"></i>
          <span>Inventaire</span>
        <% end %>
      </li>
    </ul>
  </li>
<% end %>

<!-- COMMANDES (level >= 60 uniquement) -->
<% if can_access_admin_panel?(60) %>
  <li class="admin-menu-item">
    <%= link_to admin_panel_orders_path, 
        class: "admin-menu-link #{'active' if admin_panel_active?('orders')}",
        title: "Commandes",
        aria: { label: "Voir les commandes", current: admin_panel_active?('orders') ? 'page' : nil },
        data: { bs_dismiss: mobile ? "offcanvas" : nil }.compact do %>
      <i class="bi bi-box-seam admin-menu-icon" aria-hidden="true"></i>
      <span class="admin-menu-label">Commandes</span>
    <% end %>
  </li>
<% end %>

<!-- LOGS EMAILS (SUPERADMIN uniquement - level >= 70) -->
<% if can_access_admin_panel?(70) %>
  <li class="admin-menu-item">
    <%= link_to admin_panel_mail_logs_path, 
        class: "admin-menu-link #{'active' if admin_panel_active?('mail_logs')}",
        title: "Logs des emails",
        aria: { label: "Voir les logs des emails", current: admin_panel_active?('mail_logs') ? 'page' : nil },
        data: { bs_dismiss: mobile ? "offcanvas" : nil }.compact do %>
      <i class="bi bi-envelope-paper admin-menu-icon" aria-hidden="true"></i>
      <span class="admin-menu-label">Logs Mails</span>
    <% end %>
  </li>
<% end %>

<!-- SÉPARATEUR -->
<li class="admin-menu-divider" role="separator"></li>

<!-- ACTIVEADMIN (Lien vers l'ancien admin) -->
<li class="admin-menu-item">
  <%= link_to "/activeadmin", 
      class: "admin-menu-link admin-menu-link-external",
      title: "ActiveAdmin (Ancien panel)",
      target: "_blank",
      rel: "noopener noreferrer",
      data: { bs_dismiss: mobile ? "offcanvas" : nil }.compact do %>
    <i class="bi bi-gear admin-menu-icon" aria-hidden="true"></i>
    <span class="admin-menu-label">ActiveAdmin</span>
    <i class="bi bi-box-arrow-up-right admin-menu-external-icon" aria-hidden="true"></i>
  <% end %>
</li>
