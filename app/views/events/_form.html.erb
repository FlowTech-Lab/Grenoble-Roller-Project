<%= form_with(model: event, class: "row g-4") do |f| %>
  <% if event.errors.any? %>
    <div class="col-12">
      <div class="alert alert-danger">
        <h2 class="h6 fw-semibold mb-2">
          <%= pluralize(event.errors.count, "erreur") %> empêchent l’enregistrement :
        </h2>
        <ul class="mb-0">
          <% event.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    </div>
  <% end %>

  <div class="col-12">
    <%= f.label :title, "Titre", class: "form-label fw-semibold" %>
    <%= f.text_field :title, class: "form-control", required: true, maxlength: 140 %>
  </div>

  <div class="col-12 col-md-6">
    <%= f.label :status, "Statut", class: "form-label fw-semibold" %>
    <%= f.select :status, Event.statuses.keys.map { |status| [status.humanize, status] }, {}, class: "form-select" %>
  </div>

  <div class="col-12 col-md-6">
    <%= f.label :route_id, "Parcours associé", class: "form-label fw-semibold" %>
    <%= f.collection_select :route_id, @routes, :id, :name, { include_blank: "Sans parcours" }, class: "form-select" %>
  </div>

  <div class="col-12 col-md-6">
    <%= f.label :start_at, "Date et heure de début", class: "form-label fw-semibold" %>
    <%= f.datetime_field :start_at, class: "form-control", required: true %>
  </div>

  <div class="col-12 col-md-6">
    <%= f.label :duration_min, "Durée (minutes)", class: "form-label fw-semibold" %>
    <%= f.number_field :duration_min, class: "form-control", min: 30, step: 5, required: true %>
  </div>

  <div class="col-12 col-md-6">
    <%= f.label :price_cents, "Prix (centimes)", class: "form-label fw-semibold" %>
    <%= f.number_field :price_cents, class: "form-control", min: 0, step: 50, required: true %>
  </div>

  <div class="col-12 col-md-6">
    <%= f.label :currency, "Devise", class: "form-label fw-semibold" %>
    <%= f.text_field :currency, class: "form-control", maxlength: 3, required: true, value: event.currency || "EUR" %>
  </div>

  <div class="col-12">
    <%= f.label :location_text, "Lieu / point de rendez-vous", class: "form-label fw-semibold" %>
    <%= f.text_field :location_text, class: "form-control", maxlength: 255, required: true %>
  </div>

  <div class="col-12 col-md-6">
    <%= f.label :meeting_lat, "Latitude", class: "form-label fw-semibold" %>
    <%= f.number_field :meeting_lat, class: "form-control", step: 0.000001 %>
  </div>

  <div class="col-12 col-md-6">
    <%= f.label :meeting_lng, "Longitude", class: "form-label fw-semibold" %>
    <%= f.number_field :meeting_lng, class: "form-control", step: 0.000001 %>
  </div>

  <div class="col-12">
    <%= f.label :cover_image_url, "Image de couverture (URL)", class: "form-label fw-semibold" %>
    <%= f.url_field :cover_image_url, class: "form-control" %>
    <small class="form-text text-body-secondary">
      Utilisez une image au format paysage pour un meilleur rendu.
    </small>
  </div>

  <div class="col-12">
    <%= f.label :description, "Description détaillée", class: "form-label fw-semibold" %>
    <%= f.text_area :description, class: "form-control", rows: 6, required: true %>
  </div>

  <div class="col-12 d-flex justify-content-between align-items-center">
    <%= link_to 'Retour', events_path, class: "btn btn-outline-secondary" %>
    <%= f.submit class: "btn btn-primary btn-lg" %>
  </div>
<% end %>

