<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h1 class="h3 mb-2"><%= @product.name %></h1>
    <p class="text-muted mb-0">Gestion des variantes</p>
  </div>
  <%= link_to new_admin_panel_product_product_variant_path(@product),
      class: 'btn btn-liquid-primary' do %>
    <i class="bi bi-plus-circle me-2" aria-hidden="true"></i>
    Nouvelle variante
  <% end %>
</div>

<div class="card card-liquid">
  <div class="card-header card-liquid-primary d-flex justify-content-between align-items-center">
    <h5 class="mb-0">
      <i class="bi bi-list-ul me-2" aria-hidden="true"></i>
      Variantes (<%= @variants.count %>)
    </h5>
    <div class="btn-group">
      <%= link_to bulk_edit_admin_panel_product_product_variants_path(@product, variant_ids: []),
          class: 'btn btn-sm btn-outline-liquid-secondary',
          id: 'bulk-edit-btn',
          disabled: true do %>
        <i class="bi bi-pencil-square me-1" aria-hidden="true"></i>
        Édition en masse
      <% end %>
    </div>
  </div>
  
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover mb-0" 
             data-controller="admin-panel--product-variants-grid"
             data-admin-panel--product-variants-grid-product-id-value="<%= @product.id %>">
        <thead>
          <tr>
            <th style="width: 40px;">
              <input type="checkbox" 
                     id="select_all" 
                     class="form-check-input"
                     data-admin-panel--product-variants-grid-target="selectAll">
            </th>
            <th>SKU</th>
            <th>Options</th>
            <th>Prix (€)</th>
            <th>Stock (Dispo/Total)</th>
            <th>Statut</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% if @variants.any? %>
            <% @variants.each do |variant| %>
              <%= render 'grid_row', variant: variant, product: @product %>
            <% end %>
          <% else %>
            <tr>
              <td colspan="7" class="text-center text-muted py-4">
                <i class="bi bi-inbox me-2" aria-hidden="true"></i>
                Aucune variante
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<% if @pagy %>
  <div class="mt-3">
    <%== pagy_bootstrap_nav(@pagy) if respond_to?(:pagy_bootstrap_nav) %>
  </div>
<% end %>

