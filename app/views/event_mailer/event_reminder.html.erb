<h1 style="color: #ffc107; margin-top: 0;">ğŸ“… Rappel : Ã‰vÃ©nement demain !</h1>

<p>Bonjour <%= @user.first_name %>,</p>

<% if @attendances.count > 1 %>
  <p>Nous vous rappelons que <strong><%= @attendances.count %> participants</strong> sont inscrits Ã  l'Ã©vÃ©nement <strong><%= @event.title %></strong> qui aura lieu <strong>demain</strong> !</p>
  
  <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #ffc107;">
    <h3 style="margin-top: 0; color: #333; font-size: 18px;">ğŸ‘¥ Participants inscrits</h3>
    <ul style="margin: 10px 0; padding-left: 20px;">
      <% @attendances.each do |attendance| %>
        <li style="margin: 8px 0;">
          <strong><%= attendance.participant_name %></strong>
          <% if attendance.equipment_note.present? %>
            <br><small style="color: #666;">ğŸ“¦ MatÃ©riel : <%= attendance.equipment_note %></small>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
<% else %>
  <p>Nous vous rappelons que vous Ãªtes inscrit(e) Ã  l'Ã©vÃ©nement <strong><%= @event.title %></strong> qui aura lieu <strong>demain</strong> !</p>
<% end %>

<div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #ffc107;">
  <h3 style="margin-top: 0; color: #333; font-size: 18px;">ğŸ“… DÃ©tails de l'Ã©vÃ©nement</h3>
  <table style="width: 100%; border-collapse: collapse;">
    <tr>
      <td style="padding: 8px 0; color: #666; width: 120px;">ğŸ“ Lieu :</td>
      <td style="padding: 8px 0;"><strong><%= @event.location_text %></strong></td>
    </tr>
    <tr>
      <td style="padding: 8px 0; color: #666;">ğŸ• Date :</td>
      <td style="padding: 8px 0;"><strong><%= l @event.start_at, format: :event_long, locale: :fr %></strong></td>
    </tr>
    <tr>
      <td style="padding: 8px 0; color: #666;">â±ï¸ DurÃ©e :</td>
      <td style="padding: 8px 0;"><strong><%= @event.duration_min %> minutes</strong></td>
    </tr>
    <% if @event.price_cents > 0 %>
      <tr>
        <td style="padding: 8px 0; color: #666;">ğŸ’° Prix :</td>
        <td style="padding: 8px 0;"><strong><%= number_to_currency(@event.price_cents / 100.0, unit: 'â‚¬') %></strong></td>
      </tr>
    <% end %>
    <% if @event.route.present? %>
      <tr>
        <td style="padding: 8px 0; color: #666;">ğŸ—ºï¸ Parcours :</td>
        <td style="padding: 8px 0;"><strong><%= @event.route.name %></strong></td>
      </tr>
    <% end %>
  </table>
</div>

<% if @is_initiation %>
  <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 4px solid #ffc107;">
    <h3 style="margin-top: 0; color: #333; font-size: 18px;">ğŸ“ Rappel initiation</h3>
    <% if @attendances.any? { |a| a.equipment_note.present? } %>
      <p style="margin: 10px 0;">
        <strong>ğŸ“¦ MatÃ©riel demandÃ© :</strong>
        <ul style="margin: 10px 0; padding-left: 20px;">
          <% @attendances.select { |a| a.equipment_note.present? }.each do |attendance| %>
            <li style="margin: 5px 0;">
              <strong><%= attendance.participant_name %> :</strong> <%= attendance.equipment_note %>
            </li>
          <% end %>
        </ul>
        <small style="color: #666;">N'oubliez pas votre matÃ©riel demandÃ© !</small>
      </p>
    <% end %>
    <p style="margin: 10px 0; color: #666; font-size: 14px;">
      <strong>ğŸ“ Lieu :</strong> Gymnase AmpÃ¨re, 74 Rue Anatole France, 38100 Grenoble<br>
      <strong>â° Horaires :</strong> Samedi 10h15 - 12h00 (1h45)<br>
      <strong>ğŸ›¡ï¸ SÃ©curitÃ© :</strong> Pensez Ã  apporter votre casque et vos protections
    </p>
  </div>
<% end %>

<div style="margin: 30px 0; text-align: center;">
  <%= link_to 'Voir l\'Ã©vÃ©nement', @is_initiation ? initiation_url(@event) : event_url(@event), 
      style: 'display: inline-block; background: #ffc107; color: #333; padding: 12px 24px; text-decoration: none; border-radius: 8px; font-weight: bold;' %>
</div>

<p style="color: #6c757d; font-size: 14px; margin-top: 30px;">
  Ã€ demain sur les routes de Grenoble ! ğŸ›¼
</p>

<p style="color: #6c757d; font-size: 12px; margin-top: 20px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
  <strong>ğŸ’¡ Rappel :</strong> Si vous ne pouvez pas venir, n'oubliez pas d'annuler votre inscription depuis la page de l'Ã©vÃ©nement ou depuis "Mes sorties".
</p>

