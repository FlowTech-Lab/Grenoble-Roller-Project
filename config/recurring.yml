# Configuration des tâches récurrentes (recurring jobs) pour Solid Queue
# Documentation: https://github.com/rails/solid_queue#recurring-jobs

development:
  # Sync HelloAsso payments toutes les 5 minutes
  sync_helloasso_payments:
    class: SyncHelloAssoPaymentsJob
    queue: default
    schedule: every 5 minutes
  
  # Job de rappel la veille à 19h pour les événements du lendemain
  event_reminder:
    class: EventReminderJob
    queue: default
    schedule: every day at 7:00pm
  
  # Rapport participants initiation (tous les jours à 7h)
  initiation_participants_report:
    class: InitiationParticipantsReportJob
    queue: default
    schedule: every day at 7:00am
  
  # Mettre à jour les adhésions expirées (tous les jours à minuit)
  update_expired_memberships:
    class: UpdateExpiredMembershipsJob
    queue: default
    schedule: every day at 12:00am
  
  # Envoyer les rappels de renouvellement (tous les jours à 9h)
  send_renewal_reminders:
    class: SendRenewalRemindersJob
    queue: default
    schedule: every day at 9:00am

production:
  # Nettoyer les jobs terminés de Solid Queue (toutes les heures à 12 minutes)
  clear_solid_queue_finished_jobs:
    command: "SolidQueue::Job.clear_finished_in_batches(sleep_between_batches: 0.3)"
    schedule: every hour at minute 12
  
  # Sync HelloAsso payments toutes les 5 minutes
  sync_helloasso_payments:
    class: SyncHelloAssoPaymentsJob
    queue: default
    schedule: every 5 minutes
  
  # Job de rappel la veille à 19h pour les événements du lendemain
  event_reminder:
    class: EventReminderJob
    queue: default
    schedule: every day at 7:00pm
  
  # Rapport participants initiation (tous les jours à 7h)
  initiation_participants_report:
    class: InitiationParticipantsReportJob
    queue: default
    schedule: every day at 7:00am
  
  # Mettre à jour les adhésions expirées (tous les jours à minuit)
  update_expired_memberships:
    class: UpdateExpiredMembershipsJob
    queue: default
    schedule: every day at 12:00am
  
  # Envoyer les rappels de renouvellement (tous les jours à 9h)
  send_renewal_reminders:
    class: SendRenewalRemindersJob
    queue: default
    schedule: every day at 9:00am